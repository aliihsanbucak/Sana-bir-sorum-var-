<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sana Bir Sorum Var...</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Chosen Palette: Dramatic Black & Romantic Red/Pink -->
    <!-- Application Structure Plan: Tek ekranlÄ±, merkezi bir kart tasarÄ±mÄ±. TAMAMEN MOBÄ°L UYUMLU. BaÅŸarÄ± mesajÄ± (id=success-message) tam ekran fixed overlay olarak konumlandÄ±rÄ±lmÄ±ÅŸtÄ±r. Kalbin Ã¼stÃ¼nde Ã¶zel romantik metin vardÄ±r. 'HayÄ±r' butonu eÄŸlenceli etkileÅŸimine devam eder. Yeni 'Romantik Mesaj OluÅŸtur' butonu (Gemini API) kiÅŸiselleÅŸtirme saÄŸlar. Mobil cihazlarda metin ve buton boyutlarÄ± optimize edilmiÅŸtir. -->
    <!-- Interactive Element Choices: Goal: Mobil cihazlarda kusursuz bir deneyim sunmak. Method: HTML/CSS/JS + Gemini API. Interaction: 'Evet' butonu, tam ekran overlay olan 'success-message'Ä± gÃ¶rÃ¼nÃ¼r yapar. 'HayÄ±r' butonu, 'Evet'i bÃ¼yÃ¼tÃ¼r. 'OluÅŸtur' butonu Gemini'den mesaj Ã§eker. Justification: TÃ¼m UI bileÅŸenleri (fontlar, paddingler, boyutlar) mobil Ã¶ncelikli yaklaÅŸÄ±mla revize edildi. Library: Vanilla JS, Gemini API. -->
    <!-- CONFIRMATION: NO SVG graphics used. NO Mermaid JS used. -->
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Pacifico&family=Nunito:wght@400;700&display=swap');
        body {
            font-family: 'Nunito', sans-serif;
            /* Scrollu gizle, tÃ¼m ekranÄ± kaplamak iÃ§in */
            overflow: hidden; 
            background-color: #000;
        }
        .fancy-font {
            font-family: 'Pacifico', cursive;
        }
        /* Kalp TitreÅŸimi Animasyonu */
        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.1); }
        }
        .heart-pulse {
            animation: pulse 1.5s infinite;
        }
    </style>
</head>
<body class="bg-black min-h-screen flex items-center justify-center p-4 text-white">

    <!-- BaÅŸarÄ± MesajÄ± (Gizli - Tam Ekran Fixed Overlay) -->
    <div id="success-message" class="hidden fixed inset-0 w-full h-full bg-black flex flex-col items-center justify-center p-8 z-50 text-center">
        
        <!-- Kalbin ÃœstÃ¼ndeki Ã–zel Mesaj -->
        <p class="text-xl sm:text-4xl font-semibold text-red-500 fancy-font mb-4 px-2">
            Seni bir tÃ¼rlÃ¼ Ã§Ä±karamadÄ±m aklÄ±mdan...
        </p>

        <div class="heart-pulse mb-8">
            <!-- Kalp Emoji'si - Mobil iÃ§in daha uygun boyut -->
            <span class="text-[10rem] sm:text-[18rem] block">â¤ï¸</span>
        </div>
        
        <h2 class="text-4xl sm:text-7xl font-bold text-pink-400 fancy-font animate-bounce px-2">
            Seni Seviyorum!
        </h2>
        
        <p class="text-lg sm:text-2xl text-gray-300 mt-6 px-2">
            Beni dÃ¼nyanÄ±n en mutlu insanÄ± yaptÄ±n! Åimdi kutlama zamanÄ±, Ã§antaya bakar mÄ±sÄ±n?
        </p>
    </div>

    <!-- Ana Ä°Ã§erik KartÄ± -->
    <main class="w-full max-w-lg z-10">
        <div id="card" class="bg-gray-900 shadow-2xl rounded-2xl p-6 sm:p-8 text-center transition-all duration-500 transform border border-pink-700 relative">
            
            <!-- Teklif Ä°Ã§eriÄŸi (GÃ¶rÃ¼nÃ¼r) -->
            <div id="proposal-content">
                <span class="text-6xl sm:text-7xl block mb-4 animate-ping">âœ¨</span>
                <h1 class="text-2xl sm:text-4xl font-bold text-pink-400 fancy-font">Sana Ã§ok Ã¶nemli bir sorum var...</h1>
                
                <p class="text-base sm:text-lg text-gray-300 mt-4">
                    Her anÄ±mda seni dÃ¼ÅŸÃ¼nÃ¼yorum ve hayatÄ±mÄ± seninle geÃ§irmek istiyorum. NeÅŸene bayÄ±lÄ±yorum. Ela gÃ¶zlerine ve yeni gÃ¶rdÃ¼ÄŸÃ¼m gamzelerine bitiyorum. AynÄ± duygularÄ± beslediÄŸimize inanamÄ±yorum ve ebediyen, ahiretliÄŸim olmanÄ± istiyorum.
                </p>
                
                <!-- Gemini Destekli Mesaj AlanÄ± -->
                <div class="mt-4 mb-4">
                    <button id="generate-msg-btn" class="text-xs sm:text-sm bg-pink-700 text-white py-2 px-3 sm:px-4 rounded-full transition-colors duration-200 hover:bg-pink-600">
                        âœ¨ Romantik Mesaj OluÅŸtur
                    </button>
                    <div id="loading-spinner" class="hidden mt-2 text-pink-400 text-xs sm:text-sm">Mesaj yazÄ±lÄ±yor...</div>
                    <div id="generated-message-area" class="mt-3 p-3 bg-pink-800/50 text-pink-100 rounded-lg text-sm italic hidden shadow-inner text-center">
                        <!-- Message will go here -->
                    </div>
                </div>
                <!-- /Gemini Destekli Mesaj AlanÄ± -->

                <p class="text-xl sm:text-3xl font-bold text-red-500 mt-6 sm:mt-8 mb-6 sm:mb-8">
                    Benimle Ã§Ä±kar mÄ±sÄ±n?
                </p>

                <!-- Buton Grubu: Mobil cihazda alt alta, masaÃ¼stÃ¼nde yan yana. -->
                <div class="flex flex-col sm:flex-row justify-center items-center gap-3 sm:gap-4">
                    <button id="yes-btn" class="w-full sm:w-auto bg-pink-600 hover:bg-pink-700 text-white font-bold py-3 px-6 sm:py-4 sm:px-8 rounded-full shadow-lg transition-all duration-300 transform hover:scale-105 text-lg sm:text-xl whitespace-nowrap">
                        EVET! ğŸ˜
                    </button>
                    <button id="no-btn" class="w-full sm:w-auto bg-gray-700 hover:bg-gray-600 text-white font-bold py-2 px-5 rounded-full shadow-lg transition-all duration-300 transform hover:scale-105 text-sm sm:text-md whitespace-nowrap">
                        HayÄ±r ğŸ˜¢
                    </button>
                </div>
            </div>

        </div>
    </main>

    <script>
        const successMessage = document.getElementById('success-message');
        const card = document.getElementById('card');
        const yesBtn = document.getElementById('yes-btn');
        const noBtn = document.getElementById('no-btn');
        const generateMsgBtn = document.getElementById('generate-msg-btn');
        const loadingSpinner = document.getElementById('loading-spinner');
        const generatedMessageArea = document.getElementById('generated-message-area');

        let yesButtonScale = 1;
        let noClickCount = 0;
        
        const noMessages = [
            "Emin misin BaÅŸkan? Bir daha dene. ğŸ¥º",
            "Bu butonun Ã§alÄ±ÅŸmasÄ± yasak canÄ±m!",
            "Ama neden? Kalbim kÄ±rÄ±lÄ±r ğŸ’”",
            "YanlÄ±ÅŸ butona basÄ±yorsun ğŸŒ™bÃ¼ke!",
            "LÃ¼tfeeeen? ğŸ™",
            "Sonsuza kadar basabilirsin ama cevap deÄŸiÅŸmez ğŸ˜‰",
            "Ã‡Ä±ldÄ±rtma beni Evet'e bas artÄ±k.",
            "Bak bu butona bir daha basarsan buradan evlendirme dairesine gÃ¶tÃ¼rÃ¼rÃ¼m seni."
        ];

        // --- GEMINI API ENTEGRASYONU ---
        const apiKey = ""; 
        const geminiApiUrl = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-09-2025:generateContent?key=${apiKey}`;

        async function fetchWithRetry(url, options, maxRetries = 3) {
            for (let i = 0; i < maxRetries; i++) {
                try {
                    const response = await fetch(url, options);
                    if (!response.ok) {
                        if (response.status === 429 && i < maxRetries - 1) { 
                            const delay = Math.pow(2, i) * 1000;
                            await new Promise(resolve => setTimeout(resolve, delay));
                            continue;
                        }
                        throw new Error(`HTTP error! status: ${response.status}`);
                    }
                    return response;
                } catch (error) {
                    if (i === maxRetries - 1) throw error;
                    const delay = Math.pow(2, i) * 1000;
                    await new Promise(resolve => setTimeout(resolve, delay));
                }
            }
        }

        async function generateMessage() {
            // UI State management
            loadingSpinner.classList.remove('hidden');
            generatedMessageArea.classList.add('hidden');
            generateMsgBtn.disabled = true;
            generatedMessageArea.textContent = ""; 

            const systemPrompt = "Sen, derin duygularla yazan bir romantik ÅŸairsin. AmacÄ±n, kalpleri eritecek, kÄ±sa (en fazla 3 cÃ¼mle) ve iÃ§ten bir Ã§Ä±kma teklifi mesajÄ± oluÅŸturmak. MesajÄ± direkt olarak, baÅŸka bir aÃ§Ä±klama yapmadan dÃ¶ndÃ¼r. TÃ¼rkÃ§e konuÅŸ. Mesaj samimi olmalÄ±.";
            const userQuery = "Ã‡Ä±kma teklifime eÅŸlik edecek Ã§ok romantik, kÄ±sa ve samimi bir mesaj oluÅŸtur.";

            const payload = {
                contents: [{ parts: [{ text: userQuery }] }],
                systemInstruction: { parts: [{ text: systemPrompt }] },
            };

            try {
                const response = await fetchWithRetry(geminiApiUrl, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify(payload)
                });

                const result = await response.json();
                
                const text = result.candidates?.[0]?.content?.parts?.[0]?.text;

                if (text) {
                    generatedMessageArea.textContent = text;
                } else {
                    console.error("Gemini API'den iÃ§erik alÄ±namadÄ±. YanÄ±t yapÄ±sÄ±:", result);
                    generatedMessageArea.textContent = "Mesaj oluÅŸturulamadÄ±. (Hata: BoÅŸ yanÄ±t veya filtrelenmiÅŸ iÃ§erik)";
                }
                
                generatedMessageArea.classList.remove('hidden');

            } catch (error) {
                console.error("Gemini API Ã§aÄŸrÄ±sÄ± sÄ±rasÄ±nda kritik bir hata oluÅŸtu:", error);
                // API hatasÄ± durumunda bile romantik bir yedek mesaj gÃ¶ster
                generatedMessageArea.textContent = "O Ela gÃ¶zlerinde kaybolmak ve Gamzelerinde bir Ã¶mÃ¼r yaÅŸamak istiyorum.";
                generatedMessageArea.classList.remove('hidden');
            } finally {
                loadingSpinner.classList.add('hidden');
                generateMsgBtn.disabled = false;
            }
        }

        generateMsgBtn.addEventListener('click', generateMessage);

        // --- TEKLÄ°F BUTON LOGÄ°ÄÄ° ---

        yesBtn.addEventListener('click', () => {
            // Sadece baÅŸarÄ± mesajÄ± overlay'ini gÃ¶rÃ¼nÃ¼r yap.
            successMessage.classList.remove('hidden');
        });

        noBtn.addEventListener('click', () => {
            noClickCount++;
            yesButtonScale += 0.2; 
            
            yesBtn.style.transform = `scale(${yesButtonScale})`;
            
            // Mobil dostu bÃ¼yÃ¼me efekti iÃ§in sadece transform ve padding/margin kullanÄ±yoruz.
            const currentPaddingY = parseFloat(window.getComputedStyle(yesBtn, null).getPropertyValue('padding-top'));
            const currentPaddingX = parseFloat(window.getComputedStyle(yesBtn, null).getPropertyValue('padding-left'));
            yesBtn.style.padding = `${currentPaddingY + 2}px ${currentPaddingX + 4}px`;

            noBtn.textContent = noMessages[noClickCount % noMessages.length];
            
            if (noClickCount > 7) {
                noBtn.classList.add('opacity-0');
                noBtn.classList.add('pointer-events-none');
            }
        });

        noBtn.addEventListener('mouseover', () => {
            // Fare etkileÅŸimi masaÃ¼stÃ¼ iÃ§in Ã§alÄ±ÅŸÄ±r, mobilde Ã§alÄ±ÅŸmaz ama yine de kodda kalmasÄ± sorun yaratmaz.
            if (noClickCount > 0 && noClickCount < 7) {
                const cardRect = card.getBoundingClientRect();
                const btnRect = noBtn.getBoundingClientRect();
                
                // KartÄ±n relative pozisyonu iÃ§inde rastgele hareket et
                const newTop = Math.random() * (cardRect.height - btnRect.height - 20) + 10;
                const newLeft = Math.random() * (cardRect.width - btnRect.width - 20) + 10;

                if (noBtn.style.position !== 'absolute') {
                    noBtn.style.position = 'absolute';
                    // Ä°lk pozisyonu card iÃ§inde resetle
                    noBtn.style.top = 'auto'; 
                    noBtn.style.left = 'auto';
                }
                
                noBtn.style.top = `${newTop}px`;
                noBtn.style.left = `${newLeft}px`;
            }
        });
    </script>
</body>
</html>
